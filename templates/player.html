<main class="flex" ng-controller="PlayerCtrl">
	<md-content id="playerPage">
		<!-- top info -->
		<md-card id="playerArea">
			<md-card-title>
				<md-card-title-text class="md-truncate">
					<span class="md-headline md-truncate" title="{{playback.title}}">{{playback.title}}</span>
					<span class="md-subhead md-truncate">{{playback.artist}}</span>
				</md-card-title-text>
				<md-card-title-media>
					<md-card>
						<canvas id="visualiserCvs"></canvas>
					</md-card>
				</md-card-title-media>
			</md-card-title>
			<md-card-content>
				<md-slider
					id="playbackSlider"
					min="0"
					max="{{playback.duration}}"
					ng-model="playback.time"
					class="md-primary"
					ng-change="seekerChanged()"
					aria-label="Seeker"
				></md-slider>
				<div id="playbackTimes">
					<span>{{playback.timePlayed}}</span>
					<span> / </span>
					<span>{{playback.timeTotal}}</span>
				</div>
			</md-card-content>
		</md-card>

		<!-- buttons -->
		<md-card id="playButtonsArea" class="buttonArea">

			<!-- open file -->
			<md-button
				class="md-fab md-raised md-mini"
				ng-click="openFile(true)"
				title="{{$parent.langStrings.open_file}}..."
				aria-label="Open"
			>
				<md-icon md-svg-src="./imgs/music.svg"></md-icon>
			</md-button>

			<!-- stop -->
			<md-button
				class="md-fab md-raised md-mini"
				ng-click="stopPlayback()"
				ng-disabled="playlist.length == 0 && !playback.playing"
				title="{{$parent.langStrings.stop}}"
				aria-label="Stop"
			>
				<md-icon md-svg-src="./imgs/stop.svg"></md-icon>
			</md-button>

			<!-- play / pause -->
			<md-button
				class="md-fab md-raised md-mini"
				ng-click="togglePlayback()"
				ng-disabled="playlist.length == 0"
				title="{{$parent.langStrings.play_pause}}"
				aria-label="Play"
			>
				<md-icon md-svg-src="./imgs/{{(playback.playing) ? 'pause' : 'play'}}.svg"></md-icon>
			</md-button>

			<!-- prev -->
			<md-button
				class="md-fab md-raised md-mini"
				ng-click="prevTrack()"
				ng-disabled="playlist.length < 2"
				title="{{$parent.langStrings.prev_track}}"
				aria-label="Previous"
			>
				<md-icon md-svg-src="./imgs/skip-prev.svg"></md-icon>
			</md-button>

			<!-- next -->
			<md-button
				class="md-fab md-raised md-mini"
				ng-click="nextTrack()"
				ng-disabled="playlist.length < 2"
				title="{{$parent.langStrings.next_track}}"
				aria-label="Next"
			>
				<md-icon md-svg-src="./imgs/skip-next.svg"></md-icon>
			</md-button>

			<!-- loop -->
			<md-button
				class="md-fab md-raised md-mini"
				ng-class="{'md-primary': playback.loop}"
				ng-click="loopPlayback()"
				title="{{$parent.langStrings.loop}}"
				aria-label="Loop"
			>
				<md-icon md-svg-src="./imgs/loop-{{(playback.loop) ? 'on' : 'off'}}.svg"></md-icon>
			</md-button>

			<!-- volume -->
			<span id="volumeBtn" title="{{$parent.langStrings.volume}}: {{volumePcnt}}%">
				<md-button
					class="md-fab md-raised md-mini"
					ng-class="{'md-primary': currVolume == 0.0}"
					ng-click="toggleMute()"
					aria-label="Mute"
				>
					<md-icon md-svg-src="./imgs/{{volumeImg}}.svg"></md-icon>
				</md-button>
				<md-slider
					id="volumeSlider"
					min="0.0"
					max="1.0"
					step="0.1"
					class="md-primary"
					ng-model="volumeSlider.value"
					ng-change="changeVolume()"
					aria-label="Volume"
				></md-slider>
			</span>

			<!-- settings -->
			<md-button
				id="settingsBtn"
				class="md-fab md-raised md-mini"
				ng-click="$parent.openSettings()"
				title="{{$parent.langStrings.settings}}"
				aria-label="Settings"
			>
				<md-icon md-svg-src="./imgs/cog.svg"></md-icon>
			</md-button>

			<div class="clearfix"></div>
		</md-card>

		<!-- playlist -->
		<md-card id="playlistArea">
			<md-card-content>
				<select id="playlistMenu" multiple="multiple">
					<option
						ng-repeat="opt in playlist"
						ng-dblclick="changeTrack($index, opt.name)"
						ng-selected="$index == currPlayIdx"
					>{{opt.name}}</option>
				</select>
				<div id="playlistBtnArea" class="buttonArea">
					<md-button
						class="md-fab md-raised md-mini"
						title="{{$parent.langStrings.playlist_add}}..."
						ng-click="openFile(false)"
						aria-label="Add"
					>
						<md-icon md-svg-src="./imgs/plus.svg"></md-icon>
					</md-button>
					<md-button
						class="md-fab md-raised md-mini"
						title="{{$parent.langStrings.playlist_shuffle}}"
						ng-click="shufflePlaylist()"
						ng-class="{'md-primary': randomOrder}"
						aria-label="Shuffle"
					>
						<md-icon md-svg-src="./imgs/shuffle-{{(randomOrder) ? 'on' : 'off'}}.svg"></md-icon>
					</md-button>
					<md-button
						class="md-fab md-raised md-mini"
						title="{{$parent.langStrings.playlist_clear}}"
						ng-click="clearPlaylist()"
						aria-label="Clear"
					>
						<md-icon md-svg-src="./imgs/trash.svg"></md-icon>
					</md-button>
				</div>
			</md-card-content>
		</md-card>
		<form id="openFileForm">
			<input
				id="openFile"
				type="file"
				accept="audio/*"
				multiple="multiple"
				ng-model="openFiles"
				on-file-change="loadFiles"
			/>
		</form>
	</md-content>
</main>
